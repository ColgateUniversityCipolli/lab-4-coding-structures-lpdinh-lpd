---
execute:               # Default settings for code blocks
  warning: false       # Do not print warnings
  message: false       # Do not print messages
  size: "scriptsize"   # Set code size to script size

format:
  pdf:        # Specify .pdf formatting options 
    documentclass: article     # Document Class
    number-sections: true      # Number Sections
    reference-section-title: "References" # Title for reference section
    code-line-numbers: true    # Line numbers printed in code
    cap-location: top          # Captions at the top of tables 
    geometry:
      - top=0.75in
      - left=0.75in
      - bottom=0.75in
      - right=0.75in
format-links: [pdf]
---
```{r}
#| echo: false

default_chunk_hook  <- knitr::knit_hooks$get("chunk")

latex_font_size <- c("Huge", "huge", "LARGE", "Large", 
                     "large", "normalsize", "small", 
                     "footnotesize", "scriptsize", "tiny")

knitr::knit_hooks$set(chunk = function(x, options) {
  x <- default_chunk_hook(x, options)
  if(options$size %in% latex_font_size) {
    paste0("\n \\", options$size, "\n\n", 
      x, 
      "\n\n \\normalsize"
    )
  } else {
    x
  }
})

```

```{r}
#| label: load-packages
#| include: false
library(tidyverse)
library(rvest)
```

<!-- Code For Building Menu Here -->

```{r}
#| include: false
breakfasts <- c("website/BerryMelonSmoothie.html",
                "website/BiscuitsAndGravy.html",
                "website/BreakfastCheesecake.html",
                "website/BreakfastMuffins.html",
                "website/ChiaParfait.html",
                "website/GardenTomatoQuiche.html",
                "website/OvernightOats.html",
                "website/PumpkinToast.html",
                "website/TropicalSmoothie.html")
dinner <- c("website/AfricanPeanutSoup.html",
            "website/Alfredo.html",
            "website/ArugulaPasta.html",
            "website/AutumnGrainBowl.html",
            "website/BakedZiti.html",
            "website/BBQChili.html",
            "website/Bibimbap.html",
            "website/BLTSalad.html",
            "website/Burgers.html",
            "website/CapreseSandwiches.html",
            "website/EggplantParmesan.html",
            "website/Enchiladas.html",
            "website/FloridaRolls.html",
            "website/KimchiGrilledCheese.html",
            "website/Lasagna.html",
            "website/LatinBowl.html",
            "website/Meatloaf.html",
            "website/PadThai.html",
            "website/PastaAndPeas.html",
            "website/Pizza.html",
            "website/RedWineRagu.html",
            "website/SalmonChowder.html",
            "website/Shakshuka.html")
sample.bf= sample(breakfasts, 1, replace=FALSE)
sample.dinner =sample(dinner, 3, replace=FALSE)
chosen.recipes = c(sample.bf, sample.dinner)
df=data.frame(recipe.link=chosen.recipes)
all.ingredients=list()
all.instructions=list()
images.url=list()

for(i in 1:nrow(df)){
  recipe.item <- read_html(df$recipe.link[i])
  # get ingredient items
  ingredients.section=html_element(recipe.item, "#ingredients")
  # store it as the ith element in the list
  all.ingredients[[i]]=html_elements(ingredients.section, "li")
  # get instructions
  instruction.section=html_elements(recipe.item, "#instructions")
  all.instructions[[i]]=html_elements(instruction.section, "li")
  # get image
  image.element=html_element(recipe.item, ".figure-img")
  images.url[[i]]=paste("website/",html_attr(image.element, "src"), sep="")
}
```

# Ingredients
```{r}
#| echo: false
#| results: 'asis'
# obtain the number length of the list
# length(all.ingredients)
for(i in 1:length(all.ingredients)){
  #| echo: false
  #| results: 'asis'
  formatted_list <- paste("-", html_text(all.ingredients[[i]]))
  # when use [i], the class is list. when use [[i]], the class is xml_nodeset which apparently worked. the code is to print the text of a singular html item (html_text).
  cat(formatted_list, sep = "\n")
}
```
\newpage

# Recipe One

```{r}
#| echo: false
#| results: 'asis'
# width="50%" shrinks the image for printing
title.1=html_element(read_html(df$recipe.link[2]), "h1") |> html_text()
cat(paste('![', title.1, '](', images.url[[2]], "){width=50%}"))
```

## Ingredients
```{r}
#| echo: false
#| results: 'asis'
formatted_list <- paste("-", html_text(all.ingredients[[2]]))
cat(formatted_list, sep = "\n")
```

## Instructions
```{r}
#| echo: false
#| results: 'asis'
formatted_list <- paste("1.", html_text(all.instructions[[2]]))
cat(formatted_list, sep = "\n")
```
\newpage

# Recipe Two
```{r}
#| echo: false
#| results: 'asis'
# width="50%" shrinks the image for printing
title.1=html_element(read_html(df$recipe.link[3]), "h1") |> html_text()
cat(paste('![', title.1, '](', images.url[[3]], "){width=50%}"))
```

```{r}
#| echo: false
#| results: 'asis'
# width="50%" shrinks the image for printing
cat(paste('<img src="',images.url[[3]], '" style="width: 50%; height: auto;">'))
```

## Ingredients
```{r}
#| echo: false
#| results: 'asis'
formatted_list <- paste("-", html_text(all.ingredients[[3]]))
cat(formatted_list, sep = "\n")
```

## Instructions
```{r}
#| echo: false
#| results: 'asis'
formatted_list <- paste("1.", html_text(all.instructions[[3]]))
cat(formatted_list, sep = "\n")
```

\newpage

# Recipe Three
```{r}
#| echo: false
#| results: 'asis'
# width="50%" shrinks the image for printing
title.1=html_element(read_html(df$recipe.link[4]), "h1") |> html_text()
cat(paste('![', title.1, '](', images.url[[4]], "){width=50%}"))
```
```{r}
#| echo: false
#| results: 'asis'
# width="50%" shrinks the image for printing
cat(paste('<img src="',images.url[[4]], '" style="width: 50%; height: auto;">'))
```
```{r}
#| echo: false
#| results: 'asis'
formatted_list <- paste("-", html_text(all.ingredients[[4]]))
cat(formatted_list, sep = "\n")
```

## Instructions
```{r}
#| echo: false
#| results: 'asis'
formatted_list <- paste("1.", html_text(all.instructions[[4]]))
cat(formatted_list, sep = "\n")
```

\newpage

# Breakfast Recipe
```{r}
#| echo: false
#| results: 'asis'
# width="50%" shrinks the image for printing
title.1=html_element(read_html(df$recipe.link[1]), "h1") |> html_text()
cat(paste('![', title.1, '](', images.url[[1]], "){width=50%}"))
```
## Ingredients
```{r}
#| echo: false
#| results: 'asis'
formatted_list <- paste("-", html_text(all.ingredients[[1]]))
cat(formatted_list, sep = "\n")
```

## Instructions
```{r}
#| echo: false
#| results: 'asis'
formatted_list <- paste("1.", html_text(all.instructions[[1]]))
cat(formatted_list, sep = "\n")
```